spring.application.name=AutonotesBackend

spring.profiles.active=dev,minio-storage

spring.main.banner-mode=off

spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/autonotes}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:myuser}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:mypassword}

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}

spring.jpa.open-in-view=false

spring.flyway.enabled=true
spring.flyway.url=${spring.datasource.url}
spring.flyway.user=${spring.datasource.username}
spring.flyway.password=${spring.datasource.password}

server.port=${SERVER_PORT:8080}

springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.operationsSorter=method

server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# === Caching ===
spring.cache.type=caffeine

# === Bucket4j ===
bucket4j.cache-to-use=spring
bucket4j.enabled=true
bucket4j.filters[0].cache-name=buckets
bucket4j.filters[0].url=^/api/v1/auth/login.*
bucket4j.filters[0].strategy=first
bucket4j.filters[0].rate-limits[0].bandwidths[0].capacity=5
bucket4j.filters[0].rate-limits[0].bandwidths[0].time=1
bucket4j.filters[0].rate-limits[0].bandwidths[0].unit=minutes

# === AWS S3 SDK Compatible Configuration ===
aws.s3.endpoint=${MINIO_ENDPOINT}
aws.s3.access-key=${MINIO_ACCESS_KEY}
aws.s3.secret-key=${MINIO_SECRET_KEY}
aws.s3.bucket=lecture-notes
aws.s3.region=us-east-1

# === File Upload Settings ===
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# === Scheduler Settings ===
app.scheduling.cleanup-cron=0 */2 * * * *
app.notes.processing-timeout-minutes=10
app.scheduling.cleanup-retention-hours=24
app.scheduling.outbox-interval-ms=2000

# === RabbitMQ Configuration ===
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USER:guest}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:guest}


# === Actuator (Monitoring) ===
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true


